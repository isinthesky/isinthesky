### 1. 패리티 정보의 계산 방법

- **XOR(배타적 OR) 연산**
  - 패리티 정보는 주로 **XOR 연산**을 이용해 계산됩니다.
  - XOR의 기본 원칙은 두 비트가 다를 때 1, 같을 때 0을 결과로 내는 것입니다.
    - 예를 들어, 1010과 1100의 XOR 연산은 다음과 같습니다:
      - 첫 번째 비트: 1 ⊕ 1 = 0
      - 두 번째 비트: 0 ⊕ 1 = 1
      - 세 번째 비트: 1 ⊕ 0 = 1
      - 네 번째 비트: 0 ⊕ 0 = 0  
      → 결과: 0110
  - **XOR의 중요한 특성**:  
    - 만약 A ⊕ B = C 라면, A ⊕ C = B 그리고 B ⊕ C = A 입니다.  
    - 이 점이 장애 시 손실된 데이터를 복구할 수 있는 근거가 됩니다.

- **예시**
  - 3개의 디스크에 하나의 스트라이프가 있다고 가정해 보겠습니다.
    - 디스크 1에 데이터 A, 디스크 2에 데이터 B, 디스크 3에는 **패리티 정보 P**가 저장됩니다.
    - 이때 패리티 P는 다음과 같이 계산됩니다:
      - **P = A ⊕ B**

---

### 2. 패리티 정보의 저장 방법

- **분산 저장**
  - RAID 5는 패리티 정보를 한 곳에 몰아서 저장하지 않습니다.
  - 대신, 여러 스트라이프에 걸쳐 패리티 정보가 **분산되어 저장**됩니다.
  - 예를 들어:
    - 첫 번째 스트라이프에서는 디스크 1에 패리티,
    - 두 번째 스트라이프에서는 디스크 2에 패리티,
    - 세 번째 스트라이프에서는 디스크 3에 패리티 정보가 저장되는 식으로 로테이션됩니다.
  - 이렇게 분산하면 특정 디스크에 I/O 부하가 집중되는 것을 방지하며, 전체 시스템의 성능 저하를 막을 수 있습니다.

---

### 3. 복구 시 패리티의 활용 방법

- **한 디스크 장애 상황**
  - 만약 하나의 디스크에서 데이터가 손실되었다면, 해당 스트라이프에서 나머지 데이터 블록과 패리티 정보를 통해 결손된 데이터를 복구할 수 있습니다.
  - 예를 들어, 스트라이프에 데이터 A, B, 그리고 패리티 P (P = A ⊕ B)가 있다고 할 때,
    - 만약 A가 손실되었다면, 남아있는 B와 패리티 P를 사용하여 다음과 같이 복구할 수 있습니다:
      - **A = P ⊕ B**
    - 혹은 B가 손실된 경우, **B = P ⊕ A**로 복구할 수 있습니다.
  
- **복구 과정 요약**
  - 손실된 데이터 블록의 위치를 파악합니다.
  - 나머지 데이터 블록과 해당 스트라이프의 패리티 정보를 모읍니다.
  - XOR 연산을 사용하여 손실된 데이터를 재구성합니다.

- **여러 데이터 블록 예시**
  - 만약 스트라이프에 3개의 데이터 블록 D1, D2, D3가 있고, 패리티 P가 아래와 같이 계산되었다면:
    - **P = D1 ⊕ D2 ⊕ D3**
  - 만약 D2가 손실되었다면,  
    - **D2 = P ⊕ D1 ⊕ D3**

---

### 요약

- **계산**: 각 스트라이프 내의 모든 데이터 블록에 대해 XOR 연산을 실시해 패리티 정보(P)를 생성합니다.
- **저장**: 패리티 정보는 로테이션 방식으로 모든 디스크에 분산 저장됩니다.
- **복구**: 단일 디스크 장애 시, 남아 있는 데이터와 패리티 정보를 XOR 연산을 통해 사용하여 손실된 데이터를 재생성합니다.

이러한 방식으로 RAID 5는 데이터 보호와 저장 효율을 동시에 제공합니다. 하지만 패리티 계산으로 인한 추가 작업 때문에 쓰기 성능은 주의해야 할 요소입니다.

이렇게 설명하면 컴퓨터공학 신입생도 RAID 5에서 패리티 정보가 어떻게 계산되고 저장되며 복구시에 어떻게 활용되는지 쉽게 이해할 수 있을 것입니다.
